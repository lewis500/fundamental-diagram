(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{167:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),o=a(166),i=a(165),l=a(59),u=8e4/3600,m=(1+Math.sqrt(5))/2,s=1*m*2.5,d=1/(2.5*m),f=d/3;function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){p(e,t,a[t])})}return e}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function E(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var g,b=d,y=u*f/(d-f),v=f,x=Math.min,k=Math.max,O=function(e){return E(Array(e).keys())};!function(e){e.TRIANGLE="TRIANGLE",e.GREENSHIELDS="GREENSHIELDS",e.DRAKE="DRAKE"}(g||(g={}));var j,S=O(21).map(function(e,t){return(t+1)/21*b}),w={TRIANGLE:function(e){return k(x(22.22222222222222,y*(b/e-1)),0)},GREENSHIELDS:function(e){return k(0,22.22222222222222*(1-e/b))},DRAKE:function(e){return k(0,22.22222222222222*Math.exp(-Math.pow(e/v,3)/3))}},A=function(e){return S.map(function(t){return{k:t,s:1/t,v:w[e](t),cars:O(Math.round(140*t)).map(function(e){return 0+e/t})}})},L={play:!1,lanes:A(g.TRIANGLE),vk:g.TRIANGLE};!function(e){e.TICK="TICK",e.SET_VK="SET_VK",e.SET_PLAY="SET_PLAY"}(j||(j={}));var T=function(e,t){switch(t.type){case j.TICK:var a=t.payload;return h({},e,{lanes:e.lanes.map(function(e){var t=e.cars.map(function(t){return t+a*e.v});return t[0]>e.s&&t.unshift(t[0]-e.s),t[t.length-1]>140&&t.pop(),h({},e,{cars:t})})});case j.SET_VK:return h({},e,{vk:t.payload,lanes:A(t.payload)});case j.SET_PLAY:return h({},e,{play:t.payload});default:return e}},I=r.a.createContext({state:L,dispatch:null}),R=a(19),N=a(46),M=a(20),D=a(47),K=a(172),P=a(27),C=a(48),G=a.n(C),_=(a(82),{fontSize:"12px"}),V=r.a.memo(function(e){var t=e.dx,a=e.dy,n=e.latexstring;return r.a.createElement("foreignObject",{width:"90",height:"75",transform:"translate(".concat(t,", ").concat(a,")")},r.a.createElement("span",{style:_},r.a.createElement(G.a,{math:n})))}),W=(Object(P.a)(function(e){return Object(R.a)().range([e,0]).domain([0,1.2*u])}),Object(P.a)(function(e){return Object(R.a)().range([e,0]).domain([0,137.5])}),Object(P.a)(function(e){return Object(R.a)().range([0,e]).domain([0,d+.008])}),25),z=30,H=20,Y=90,F="translate(".concat(H,",").concat(W,")"),J=Object(n.memo)(function(e){var t=e.height,a=e.width,n=e.children;return r.a.createElement("g",{transform:"translate(0,".concat(t,")")},r.a.createElement("path",{d:"M0,0L".concat(a,",0"),fill:"none",stroke:"black",markerEnd:"url(#arrow)"}),n)}),q=Object(n.memo)(function(e){var t=e.height,a=e.children;return r.a.createElement("g",null,r.a.createElement("path",{d:"M0,0L0,".concat(t),fill:"none",stroke:"black",markerEnd:"url(#arrow)",markerStart:"url(#arrow)"}),a)}),B=Object(P.a)(function(e,t,a){var c=Object(R.a)().range([t,0]).domain([0,1.2*u]),o=Object(R.a)().range([t,0]).domain([0,137.5]),i=Object(R.a)().range([0,e]).domain([0,d+.008]),l=t-o(2.5),m=t-o(1),f=r.a.createElement("mask",{id:"myMask"},r.a.createElement("rect",{width:e,height:t,fill:"white"})),h=Object(n.createElement)("path",{className:a.road,strokeWidth:t-o(s),d:"M0,0L0,".concat(t)});return{vScale:c,xScale:o,kScale:i,carLength:l,carWidth:m,Mask:f,Road:h}}),U=function(e){var t=e.width,a=e.height,c=Object(n.useContext)(I).state,o=w[c.vk],i=Q({width:t+Y+H,height:a+W+z}),l=B(t,a,i),m=l.vScale,s=l.xScale,h=l.kScale,p=l.carLength,E=l.carWidth,b=l.Mask,y=l.Road,v=Object(n.useMemo)(function(){return Object(n.createElement)("path",{className:i.path,d:O(70).map(function(e,t,a){return e/(a.length-1)*d}).reduce(function(e,t){return e+h(t)+","+m(o(t))+" "},"M")})},[h,m,o]);return r.a.createElement("svg",{className:i.svg},r.a.createElement("g",{transform:F},b,r.a.createElement("g",{mask:"url(#myMask)"},c.lanes.map(function(e,t){return r.a.createElement("g",{key:e.k,transform:"translate(".concat(h(e.k),",0)")},y,e.cars.map(function(e,t){return r.a.createElement("rect",{key:t,className:i.car,y:s(e),x:-E/2,height:p,width:E})}))}),v),r.a.createElement(q,{height:a},r.a.createElement(V,{dx:-20,dy:m(u)-10,latexstring:"v_f"}),r.a.createElement(V,{dx:-10,dy:-25,latexstring:"v \\; \\text{(km/hr)}"})),r.a.createElement(J,{height:a,width:t},r.a.createElement(V,{dx:h(c.vk===g.GREENSHIELDS?d/2:f)-4,dy:0,latexstring:"k_0"}),r.a.createElement(V,{dx:h(d)-4,dy:0,latexstring:"k_j"}),r.a.createElement(V,{dx:t+10,dy:-10,latexstring:"k \\; \\text{(veh/km)}"}))))},Q=Object(K.a)({path:{strokeWidth:"4px",fill:"none",stroke:N.a.A700,opacity:.8},road:{stroke:M.a[300]},car:{fill:D.a.A200,rx:1,ry:1,stroke:"none"},svg:function(e){return{width:e.width,height:e.height,display:"block","& text":{fontFamily:"Puritan, san-serif",fontSize:"11px"}}},text:{textAlign:"center",fontSize:"10px"}}),X=a(149),Z=a(38),$=Object(X.a)({"@global":{body:{margin:"0 !important",padding:"0 !important",fontFamily:" 'Puritan', sans-serif"}},main:{maxWidth:"900px",color:Z.a.grey[800],margin:"0 auto",boxSizing:"border-box",display:"flex",flexDirection:"column"},red:{fill:Z.a.red.A400},paper:{maxWidth:"500px",margin:"auto",display:"flex",padding:"20px",flexDirection:"row",alignItems:"center"},button:{margin:"5px"},visContainer:{margin:"0 auto"},sliderContainer:{width:"300px",padding:"20px",boxSizing:"border-box"}}),ee=a(170),te=a(156),ae=a(168),ne=a(155),re=a(169);function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var oe=r.a.memo(function(e){var t=e.changeVK,a=e.vk;return r.a.createElement(ee.a,{component:"fieldset"},r.a.createElement(re.a,{component:"legend"},"Fundamental Diagram"),r.a.createElement(ne.a,{"aria-label":"Fundamental Diagram",name:"fd",value:a,onChange:t},r.a.createElement(te.a,{value:g.TRIANGLE,control:r.a.createElement(ae.a,null),label:"Triangle"}),r.a.createElement(te.a,{value:g.GREENSHIELDS,control:r.a.createElement(ae.a,null),label:"Greenshields"}),r.a.createElement(te.a,{value:g.DRAKE,control:r.a.createElement(ae.a,null),label:"Drake"})))}),ie={},le=600/m,ue=function(){var e=Object(n.useContext)(I),t=e.state,a=e.dispatch,c=t.play,u=$(ie);!function(e,t){var a=Object(n.useRef)(0);a.current=e,Object(n.useLayoutEffect)(function(){if(t){var e=0,n=Object(l.a)(function(t){var n=(t-e)/1e3;e=t,a.current&&a.current(n)});return function(){return n.stop()}}},[t])}(function(e){e/=.5,a({type:j.TICK,payload:Math.min(e,.05)})},c);var m=Object(n.useCallback)(function(e){a({type:j.SET_VK,payload:e.target.value})},[]);return r.a.createElement("div",{className:u.main},r.a.createElement(i.a,{className:u.paper,elevation:2},r.a.createElement(o.a,{className:u.button,variant:"contained",color:"secondary",onClick:function(){return a({type:j.SET_PLAY,payload:!c})}},c?"PAUSE":"PLAY"),r.a.createElement(oe,{changeVK:m,vk:t.vk})),r.a.createElement(U,{height:le,width:600}))},me=a(385),se=a(37),de=a(57),fe=a.n(de),he=a(58),pe=a.n(he),Ee=document.getElementById("root");if(!Ee)throw Error("no root container");var ge=Object(se.a)({palette:{primary:{main:fe.a[500]},secondary:{main:pe.a[500]}}});Object(c.render)(r.a.createElement(me.a,{theme:ge},r.a.createElement(function(){var e=ce(Object(n.useReducer)(T,L),2),t=e[0],a=e[1];return r.a.createElement(I.Provider,{value:{state:t,dispatch:a}},r.a.createElement(ue,null))},null)),Ee)}},[[167,1,2]]]);